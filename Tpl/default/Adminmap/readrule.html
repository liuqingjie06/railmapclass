<include file="_header" />

<h1>读取规则</h1>
<!-- 选取数据表中的 -->
<!--  div class="list">
	<table width="100%" border="0" cellspacing="0" cellpadding="0">
		<tbody>
			<tr>
				<th class="line_l">数据类型</th>
				<th class="line_l">表名（sheet name）</th>
				<!--  th class="line_l">数据起始行</th>
				<th class="line_l">状态</th>
				<th class="line_l" width="120px"></th>
			</tr>
		<volist id="vo" key="k" name="datatypename">
		<form method="post" action="{:U('map/Adminmap/preview')}" target="_blank">
			<tr>
				<th class="line_l">{$vo}</th>
				<th class="line_l"><input type="text" name="sheetname" id="sheetname{$k}" /></th>
				
				<th class="line_l">未定义</th>
				<th class="line_l"><input type="submit" value="预览数据" onclick="return checkInput({$k});"/></th>
			</tr>
			<input type="hidden" name="type" value="{$vo}" />
			<input type="hidden" name="filedir" value="{$filedir}"  /> 
		</form>
		</volist>
		</tbody>
	
	</table>
</div-->

<div style="width:100%;height:15px"></div>
<!-- 操作读取规则 -->
<div class="list">
<table width="100%" border="1">
	<tbdody>
	<tr>
		<php>
			$i=1;
			foreach($datatype as $key=>$value){
		</php>	
		<form method="post" id="dataform{$i}"  action="{:U('map/Adminmap/test')}" > 
		    <input type="hidden" name="type" value="{$key}" />
			<input type="hidden" name="filedir" value="{$filedir}"  /> 
		<th style="width:100px;vertical-align:top">
			<div style="margin-top:5px">
			<h3>{$key}</h3>
			<p>表名</p><input type="text" name="sheetname" id="sheetname{$i}" />
			          <input type="submit" value="预览数据" onclick="return checkInput({$i});"/>
			<p>起始行</p><select name="beginline" >
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
						<option>6</option>
				</select>
			</h>
			<php>
				foreach($value as $k=>$v){
			</php>
				{$k}<input type="text" maxlength="1" name="{$v}" />
			<php> } </php>	
			<input type="submit" value="提交"  />
			<input type="hidden" value=""   />
			</form> 
			<p><strong>状态</strong>完成  未完成</p>
			</div>		
		</th>
		<php>}</php>
	</tr>
	
	</tbdody>
</table>
</div>

<script type="text/javascript">
	//验证Radio有值
	
	function checkInput(i){
		var name='sheetname'+i.toString();
        //alert('hello world');
		var theCheckInput=document.getElementById(name);
		//alert(theCheckInput); 
   		if(theCheckInput.value==""){	
   			alert('您没有输入表名');
   			return false;
   		}
   		
   		//location.href = "{:U('map/Adminmap/preview')}";
   		//预览数据重新定向到preview
   		var formname='dataform'+i.toString();
   		var form=document.getElementById(formname);
   		form.action="{:U('map/Adminmap/preview/')}";
   		form.target="_blank";
   		
   		return true;
   	}
</script>


<include file="_footer" />